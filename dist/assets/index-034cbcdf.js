import{K as k,d as X,r as _,c as Y,H as Z,e as n,o as b,f as U,h as l,w as o,j as c,i as d,D as h,F as w,n as N,g as C,t as P,x as ee,y as ae,L as g,_ as te}from"./index-167c0a10.js";const le=(u,s)=>k.get(`/admin/product/baseTrademark/${u}/${s}`),oe=u=>u.id?k.put("/admin/product/baseTrademark/update",u):k.post("/admin/product/baseTrademark/save",u),re=u=>k.delete("/admin/product/baseTrademark/remove/"+u),ne={style:{color:"red"}},se=["src"],de=["src"],ie=X({__name:"index",setup(u){let s=_(1),f=_(3),z=_(0),x=_([]),i=_(!0),r=Y({tmName:"",logoUrl:""}),p=_();const v=async(a=1)=>{s.value=a;let e=await le(s.value,f.value);console.log(e),e.code===200&&(z.value=e.data.total,x.value=e.data.records)},q=a=>a.type=="image/png"||a.type=="image/jpeg"||a.type=="image/gif"?a.size/1024/1024<4?!0:(g({type:"error",message:"上传文件大小不能超过4M"}),!1):(g({type:"error",message:"上传文件格式务必PNG|JPG|GIF"}),!1),E=a=>{r.logoUrl=a.data,p.value.clearValidate("logoUrl")};Z(()=>{v()});const L=()=>{v()},M=()=>{var a,e;i.value=!0,r.id=0,r.tmName="",r.logoUrl="",(a=p.value)==null||a.clearValidate("tmName"),(e=p.value)==null||e.clearValidate("logoUrl")},j=a=>{var e;(e=p.value)==null||e.resetFields(),i.value=!0,Object.assign(r,a)},D=()=>{i.value=!1},$=async()=>{await p.value.validate();let a=await oe(r);console.log(a),a.code===200?(i.value=!1,g({type:"success",message:r.id?"修改成功":"添加成功"}),v(r.id?s.value:1)):g({type:"error",message:r.id?"修改失败":"添加失败"}),i.value=!1},A={tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur",validator:(a,e,m)=>{console.log(a),e.trim().length<2?m(new Error("品牌名需要大于等于两位")):m()}}],logoUrl:[{required:!0,message:"请上传品牌logo",validator:(a,e)=>{a?e():e(new Error("请上传品牌logo"))}}]},B=async a=>{(await re(a)).code===200?(g({type:"success",message:"删除品牌成功"}),v(x.value.length>1?s.value-1:s.value)):g({type:"error",message:"删除品牌失败"})};return(a,e)=>{const m=n("el-button"),y=n("el-table-column"),G=n("el-popconfirm"),O=n("el-table"),S=n("el-pagination"),F=n("el-card"),H=n("el-input"),V=n("el-form-item"),R=n("Plus"),I=n("el-icon"),J=n("el-upload"),K=n("el-form"),W=n("el-dialog");return b(),U(w,null,[l(F,{class:"box-card"},{default:o(()=>[c(` 头部具名插槽 \r
            <template #header>\r
            <div class="card-header">\r
                <span>Card name</span>\r
                <el-button class="button" text>Operation button</el-button>\r
            </div>\r
        </template> `),c(" 顶部添加卡牌的按钮 "),l(m,{type:"primary",size:"default",icon:"Plus",onClick:M},{default:o(()=>[N(" 添加品牌 ")]),_:1}),c(" 表格组件 "),l(O,{style:{margin:"10px 0px"},border:"",data:d(x)},{default:o(()=>[l(y,{width:"80px",label:"序号",type:"index",align:"center"}),c(' <el-table-column label="品牌名称" prop="tmName"></el-table-column> '),c(" 除了使用prop外还有自定义方式，可以加一些操作 "),l(y,{label:"品牌名称"},{default:o(({row:t,$index:T})=>[C("pre",ne,P(t.tmName),1)]),_:1}),l(y,{label:"品牌LOGO"},{default:o(({row:t,$index:T})=>[C("img",{src:t.logoUrl,style:{height:"100px",width:"100px"}},null,8,se)]),_:1}),l(y,{label:"品牌操作"},{default:o(({row:t,$index:T})=>[l(m,{type:"primary",size:"small",icon:"Edit",onClick:Q=>j(t)},null,8,["onClick"]),l(G,{title:`您确认要删除当前品牌${t.tmName}吗`,width:"250px",icon:"Delete",onConfirm:Q=>B(t.id)},{reference:o(()=>[l(m,{type:"primary",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1}),c(' <el-pagination background layout="prev, pager, next" :total="1000" /> ')]),_:1},8,["data"]),(b(),U(w,null,ee(4,t=>C("div",{key:t,class:"text item"},P("List item "+t),1)),64)),c(` 分页器组件 \r
            v-model:current-page->设置当前页码\r
            v-model:page-size->设置每页显示多少条数据\r
            :page-sizes->设置每页显示多少条数据，可修改 而改变页数\r
            :small->设置分页器的大小 boolean值,默认为false\r
            :background->设置分页器是否有背景色 boolean值\r
            :layout->设置分页器的六个子组件的布局，相互之间的位置,->表示中间被空白填充\r
        `),l(S,{onCurrentChange:v,onSizeChange:L,"current-page":d(s),"onUpdate:currentPage":e[0]||(e[0]=t=>h(s)?s.value=t:s=t),"page-size":d(f),"onUpdate:pageSize":e[1]||(e[1]=t=>h(f)?f.value=t:f=t),"page-sizes":[3,5,10,20,30,40],small:!0,background:!0,layout:"total, sizes, prev, pager, ->,next, jumper",total:d(z)},null,8,["current-page","page-size","total"])]),_:1}),c(" 对话框组件:在添加已有品牌和修改已有品牌时使用的结构 "),l(W,{modelValue:d(i),"onUpdate:modelValue":e[3]||(e[3]=t=>h(i)?i.value=t:i=t),title:"添加品牌"},{footer:o(()=>[l(m,{type:"primary",size:"default",onClick:D},{default:o(()=>[N("取消")]),_:1}),l(m,{type:"primary",size:"default",onClick:$},{default:o(()=>[N("确定")]),_:1})]),default:o(()=>[l(K,{style:{width:"80%"},model:d(r),rules:A,ref_key:"formRef",ref:p},{default:o(()=>[l(V,{label:"品牌名称","label-width":"80px",prop:"tmName"},{default:o(()=>[l(H,{placeholder:"请输入品牌名称",modelValue:d(r).tmName,"onUpdate:modelValue":e[2]||(e[2]=t=>d(r).tmName=t)},null,8,["modelValue"])]),_:1}),l(V,{label:"品牌logo","label-width":"80px",prop:"logoUrl"},{default:o(()=>[l(J,{class:"avatar-uploader",action:"http://sph-api.atguigu.cn/admin/product/fileUpload","show-file-list":!0,"on-success":E,"before-upload":q},{default:o(()=>[d(r).logoUrl?(b(),U("img",{key:0,src:d(r).logoUrl,class:"avatar"},null,8,de)):(b(),ae(I,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[l(R)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const pe=te(ie,[["__scopeId","data-v-693ad49d"],["__file","C:/MyFile/Work/VUE/vue3_admin_template/project/src/views/product/trademark/index.vue"]]);export{pe as default};
