import{K as c,d as N,r as g,c as z,H as A,e as i,o as B,f as D,h as e,w as t,i as d,j as E,D as V,F,n as u,t as O,g as H,L as C,_ as R}from"./index-167c0a10.js";const T=()=>c.get("/admin/acl/permission"),w=r=>r.id?c.put("/admin/acl/permission/update",r):c.post("/admin/acl/permission/save",r),K=r=>c.delete("/admin/acl/permission/remove/"+r),L={class:"dialog-footer"},S=N({__name:"index",setup(r){let f=g([]),s=g(!1),a=z({code:"",level:0,name:"",pid:0});A(()=>{_()});const _=async()=>{let o=await T();o.code==200&&(f.value=o.data)},x=o=>{Object.assign(a,{id:0,code:"",level:0,name:"",pid:0}),s.value=!0,a.level=o.level+1,a.pid=o.id},k=o=>{s.value=!0,Object.assign(a,o)},M=async()=>{(await w(a)).code==200&&(s.value=!1,C({type:"success",message:a.id?"更新成功":"添加成功"}),_())},P=async o=>{(await K(o)).code==200&&(C({type:"success",message:"删除成功"}),_())};return(o,n)=>{const p=i("el-table-column"),m=i("el-button"),U=i("el-popconfirm"),$=i("el-table"),v=i("el-input"),b=i("el-form-item"),j=i("el-form"),q=i("el-dialog");return B(),D(F,null,[e($,{data:d(f),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(p,{label:"名称",prop:"name"}),e(p,{label:"权限值",prop:"code"}),e(p,{label:"修改时间",prop:"updateTime"}),e(p,{label:"操作"},{default:t(({row:l,$index:W})=>[e(m,{type:"primary",onClick:y=>x(l),size:"small",disabled:l.level==4},{default:t(()=>[u(O(l.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick","disabled"]),e(m,{type:"primary",onClick:y=>k(l),size:"small",disabled:l.level==1},{default:t(()=>[u(" 编辑 ")]),_:2},1032,["onClick","disabled"]),e(U,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:y=>P(l.id)},{reference:t(()=>[e(m,{type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[u(" 删除 ")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),E(" 对话框组件:添加或者更新已有的菜单的数据结构 "),e(q,{modelValue:d(s),"onUpdate:modelValue":n[3]||(n[3]=l=>V(s)?s.value=l:s=l),title:d(a).id?"更新菜单":"添加菜单"},{footer:t(()=>[H("span",L,[e(m,{onClick:n[2]||(n[2]=l=>V(s)?s.value=!1:s=!1)},{default:t(()=>[u("取消")]),_:1}),e(m,{type:"primary",onClick:M},{default:t(()=>[u("确定")]),_:1})])]),default:t(()=>[e(j,null,{default:t(()=>[e(b,{label:"名称"},{default:t(()=>[e(v,{placeholder:"请你输入菜单名称",modelValue:d(a).name,"onUpdate:modelValue":n[0]||(n[0]=l=>d(a).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"权限"},{default:t(()=>[e(v,{placeholder:"请你输入权限数值",modelValue:d(a).code,"onUpdate:modelValue":n[1]||(n[1]=l=>d(a).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}}),G=R(S,[["__file","C:/MyFile/Work/VUE/vue3_admin_template/project/src/views/acl/permission/index.vue"]]);export{G as default};
